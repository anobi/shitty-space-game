GameStates = {
	NONE: 0,
	LOADING: 1,
	MAIN_MENU: 2,
	GAME: 3,
	GAME_OVER: 4
}

function Game(){

	//gamestates and so on
	this.loaded = false;
	this.debug = false;
	this.gamestate = GameStates.NONE;

	//screen & rendering
	this.fullscreen = false;
	this.canvasWidth = 800;
	this.canvasHeight = 600;
	this.canvasElement = null;
	this.canvas = null;
	this.ui = null;

	//game data
	this.score = 0;
	this.player = null;
	this.entitys = [];
	this.stars = []; //to be replaced by a star shader
};


Game.prototype = {

	init: function() {
		if(this.loaded)
		{
			return;
		}

		this.canvasElement = document.getElementById('canvas');
		this.canvas = canvasElement.get(0).getContext('2d');
		this.canvasElement.style = {width: this.canvasWidth, height: this.canvasheight};

		this.ui = new Ui();
		this.ui.init();

		this.player = new Player();
		this.player.init();
		this.entitys.push(player);

		this.loaded = true;
		update();
	},

	update: function() {

		if(this.loaded){

			canvas.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);

			//update entities
			for(var i = 0; i < this.entitys.length; i++) {
				this.entitys[i].update();
			}

			//handle collisions

			//update ui
			this.ui.update();

			//continue the loop
			window.setTimeout(update, 1000 / 60);
		}
	}
};
